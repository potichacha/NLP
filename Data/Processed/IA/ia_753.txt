Implement a proxy server using http-proxy module, the proxy should be fully transparent, i.e. it will never add any custom header and it will only act as a middleware, all the outgoing and incoming headers should be forwarded as it is.

To implement a fully transparent proxy server using the  http-proxy  module in Node.js, follow these steps: First, make sure you have Node.js installed on your system. You can download and install Node.js from the official website:  Next, create a new directory for your proxy server project, and navigate to it in your terminal or command prompt. Initialize a new Node.js project by running  npm init -y . This will create a  package.json  file with default values. Install the  http-proxy  module by running  npm install http-proxy . Create a new file called  proxy-server.js  in your project directory and add the following code: This code sets up a simple HTTP server that listens for incoming requests, and uses the  http-proxy  module to forward the requests to the target URL specified in the request headers. It doesn't modify the headers in any way, ensuring a fully transparent proxy. Start your proxy server by running  node proxy-server.js . To test your proxy server, send a request using a tool like  curl  or Postman, with the target URL specified in the headers. For example, using  curl : This request will be forwarded to  http://example.com , and the response will be returned by your proxy server without any modifications.

convert the code to support https protocol as well

To support both HTTP and HTTPS with your transparent proxy server, you'll need to update the code and install an additional package. Follow these steps: Install the  https-proxy-agent  module by running  npm install https-proxy-agent . Modify the  proxy-server.js  file to include both HTTP and HTTPS support: This updated code includes the  https  module and  https-proxy-agent . It determines the target URL's protocol (HTTP or HTTPS) and sets up the appropriate agent accordingly. The  handleRequest  function is used for both HTTP and HTTPS requests. With these changes, your transparent proxy server will now support both HTTP and HTTPS target URLs. To test, use a tool like  curl  or Postman to send requests with target URLs of both protocols: For HTTP: For HTTPS:

what does the https-proxy-agent does?